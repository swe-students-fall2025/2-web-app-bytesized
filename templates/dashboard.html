{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<h2>{{ month_label or 'This Month' }} Overview</h2>

<section>
  <div><strong>Total Planned:</strong> {{ totals.planned or 0 }}</div>
  <div><strong>Total Actual:</strong> {{ totals.actual or 0 }}</div>
  <div><strong>Remaining:</strong> {{ totals.remaining or 0 }}</div>
</section>

<form method="get" action="{{ url_for('dashboard') }}" style="margin-top:12px">
  <label>Month</label>
  <input type="month" name="ym" value="{{ ym|default('') }}">
  <button type="submit">Go</button>
</form>

<p style="margin-top:12px">
  <a href="{{ url_for('plans_list') }}">Plans</a> |
  <a href="{{ url_for('expenses_list') }}">Expenses</a> |
  <a href="{{ url_for('expense_new') }}">Add Expense</a>
</p>

<button type="button" onclick="document.getElementById('budget-modal').style.display='block'">
  Set Monthly Budget
</button>

<!-- Monthly Budget Modal -->
<div id="budget-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.5);">
  <div style="max-width:420px; margin:10% auto; background:#fff; padding:16px; border-radius:8px;">
    <h3>Monthly Budget</h3>
    <form method="post" action="{{ url_for('set_monthly_budget') }}">
      <div>
        <label>Year</label>
        <input name="year" value="{{ year|default('') }}" required>
      </div>
      <div>
        <label>Month</label>
        <input name="month" value="{{ month|default('') }}" required>
      </div>
      <div>
        <label>Amount</label>
        <input name="amount" type="number" step="0.01" min="0" required>
      </div>
      <button type="submit">Save</button>
      <button type="button" onclick="document.getElementById('budget-modal').style.display='none'">Cancel</button>
    </form>
  </div>
</div>
{% endblock %}
